define([
  "dojo/_base/declare"
  , "sol/fileName"
  , "dojo/dom-construct"
  , "dojo/_base/lang"
  , "dojo/topic"
  , "dijit/layout/BorderContainer"
  , "sol/wgt/CodeMirror"
  , "dijit/MenuBar"
], function(
  declare
  , fileName
  , domConstruct
  , lang
  , topic
  , BorderContainer
  , CodeMirror
  , MenuBar
){
  return declare([
    BorderContainer
  ], {
    content: {} // will be provided
    , buildRendering: function(){
      var ret = this.inherited(arguments);
      this.menu = new MenuBar({
        
      });
      this.own(this.menu);
      
      return ret;
    }
    , startup: function(){
      if (this._started){
        return;
      };
      this.inherited(arguments);
      this.renderArray(this.content.children);
      this.on(".dgrid-row:click", lang.hitch(this, function(evt){
        var row = this.row(evt);
        topic.publish("client/openid", {
          item: row.data
          , insteadOf: this.contentObj
        });
        // row.element == the element with the dgrid-row class
        // row.id == the identity of the item represented by the row
        // row.data == the item represented by the row
      }));
    }
  });
});
